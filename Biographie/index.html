<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Biographie — Réalité Augmentée</title>

  <!-- A-Frame & AR.js -->
  <script src="https://cdn.jsdelivr.net/gh/aframevr/aframe@1.6.0/dist/aframe-master.min.js"></script>
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>

  <style>
    html, body { height: 100%; margin: 0; }
    #instructions {
      position: absolute;
      z-index: 2;
      left: 8px;
      top: 8px;
      background: rgba(0,0,0,0.5);
      color: white;
      padding: 8px;
      border-radius: 6px;
      font-family: sans-serif;
      font-size: 14px;
      max-width: 320px;
    }
    #startBtn {
      position: absolute;
      right: 8px;
      top: 8px;
      z-index: 2;
      padding: 8px 12px;
      background: #0b74de;
      color: #fff;
      border: none;
      border-radius: 6px;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <div id="instructions">
    Éditez les constantes OWNER/REPO/BRANCH/PATTERN_FILE/IMAGE_URL en haut du fichier pour pointer sur votre dépôt et le nom du fichier .patt placé dans Biographie/markers/. Ensuite activez GitHub Pages (Settings → Pages → main / root) et ouvrez la page depuis un smartphone. 
  </div>
  <button id="startBtn">Démarrer la caméra</button>

  <a-scene embedded arjs="sourceType: webcam;">
    <a-entity camera></a-entity>
  </a-scene>

  <script>
    /*
      CONFIGURATION — Éditez ces valeurs directement dans le fichier :
    */
    const OWNER = "kcirtapregilo";         // <-- remplacer par votre login si nécessaire
    const REPO  = "femmes-de-science";     // <-- remplacer si nécessaire
    const BRANCH = "main";                 // <-- remplacer si vous utilisez une autre branche
    const PATTERN_FILE = "mon-marqueur.patt"; // <-- nom du .patt placé dans Biographie/markers/
    const IMAGE_URL = "https://example.com/mon-image.png"; // <-- adresse complète (https) de l'image

    // Construire l'URL brute (raw) du fichier .patt via raw.githack (convient pour AR.js)
    const patternUrl = `https://raw.githack.com/${OWNER}/${REPO}/${BRANCH}/Biographie/markers/${encodeURIComponent(PATTERN_FILE)}`;

    function createMarker() {
      const scene = document.querySelector('a-scene');

      const marker = document.createElement('a-marker');
      marker.setAttribute('type', 'pattern');
      marker.setAttribute('url', patternUrl);

      const imageEntity = document.createElement('a-image');
      imageEntity.setAttribute('src', IMAGE_URL);
      imageEntity.setAttribute('position', '0 0.5 0');
      imageEntity.setAttribute('rotation', '-90 0 0');
      imageEntity.setAttribute('scale', '1 1 1');

      marker.appendChild(imageEntity);
      scene.appendChild(marker);
    }

    // Start button to request camera permission on user gesture (better on mobile)
    document.getElementById('startBtn').addEventListener('click', function() {
      // create marker after a user gesture so mobile browsers allow camera access
      createMarker();
      // hide button
      this.style.display = 'none';
      console.log('Pattern URL:', patternUrl);
    });

  </script>
</body>
</html>